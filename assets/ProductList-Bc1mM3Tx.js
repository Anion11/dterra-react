import{j as f,b as U,T as I,r as B,d as W,L as J}from"./index-CFf4OsXn.js";import{e as K,c as Q,m as E,a as Z,s as F,b as ee,d as H,g as X,f as te,S as ae,h as se,T as ie,$ as ne}from"./api-CHeISoyX.js";const re="_list_herra_15",le="_container_herra_33",R={list:re,container:le},oe="_card_1fax3_15",ce="_card__image_1fax3_24",de="_card__content_1fax3_36",pe="_card__button_1fax3_49",j={card:oe,card__image:ce,card__content:de,card__button:pe},fe="_button_yw69a_15",N={button:fe},ue=o=>{const{text:e,onClick:s,className:n,variant:d}=o;return f.jsx("button",{className:U(N.button,N[`button_variant-${d}`],n&&n),onClick:s,children:e&&f.jsx(I,{variant:"18",className:N.button__text,children:e})})};function me(o,e,s,n){return o.params.createElements&&Object.keys(n).forEach(d=>{if(!s[d]&&s.auto===!0){let r=K(o.el,`.${n[d]}`)[0];r||(r=Q("div",n[d]),r.className=n[d],o.el.append(r)),s[d]=r,e[d]=r}}),s}function k(o){return o===void 0&&(o=""),`.${o.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function ge(o){let{swiper:e,extendParams:s,on:n,emit:d}=o;const r="swiper-pagination";s({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:t=>t,formatFractionTotal:t=>t,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),e.pagination={el:null,bullets:[]};let u,m=0;function h(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function g(t,a){const{bulletActiveClass:i}=e.params.pagination;t&&(t=t[`${a==="prev"?"previous":"next"}ElementSibling`],t&&(t.classList.add(`${i}-${a}`),t=t[`${a==="prev"?"previous":"next"}ElementSibling`],t&&t.classList.add(`${i}-${a}-${a}`)))}function $(t,a,i){if(t=t%i,a=a%i,a===t+1)return"next";if(a===t-1)return"previous"}function c(t){const a=t.target.closest(k(e.params.pagination.bulletClass));if(!a)return;t.preventDefault();const i=H(a)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===i)return;const p=$(e.realIndex,i,e.slides.length);p==="next"?e.slideNext():p==="previous"?e.slidePrev():e.slideToLoop(i)}else e.slideTo(i)}function l(){const t=e.rtl,a=e.params.pagination;if(h())return;let i=e.pagination.el;i=E(i);let p,x;const T=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,D=e.params.loop?Math.ceil(T/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(x=e.previousRealIndex||0,p=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(p=e.snapIndex,x=e.previousSnapIndex):(x=e.previousIndex||0,p=e.activeIndex||0),a.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const v=e.pagination.bullets;let L,w,S;if(a.dynamicBullets&&(u=ee(v[0],e.isHorizontal()?"width":"height"),i.forEach(y=>{y.style[e.isHorizontal()?"width":"height"]=`${u*(a.dynamicMainBullets+4)}px`}),a.dynamicMainBullets>1&&x!==void 0&&(m+=p-(x||0),m>a.dynamicMainBullets-1?m=a.dynamicMainBullets-1:m<0&&(m=0)),L=Math.max(p-m,0),w=L+(Math.min(v.length,a.dynamicMainBullets)-1),S=(w+L)/2),v.forEach(y=>{const _=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(C=>`${a.bulletActiveClass}${C}`)].map(C=>typeof C=="string"&&C.includes(" ")?C.split(" "):C).flat();y.classList.remove(..._)}),i.length>1)v.forEach(y=>{const _=H(y);_===p?y.classList.add(...a.bulletActiveClass.split(" ")):e.isElement&&y.setAttribute("part","bullet"),a.dynamicBullets&&(_>=L&&_<=w&&y.classList.add(...`${a.bulletActiveClass}-main`.split(" ")),_===L&&g(y,"prev"),_===w&&g(y,"next"))});else{const y=v[p];if(y&&y.classList.add(...a.bulletActiveClass.split(" ")),e.isElement&&v.forEach((_,C)=>{_.setAttribute("part",C===p?"bullet-active":"bullet")}),a.dynamicBullets){const _=v[L],C=v[w];for(let P=L;P<=w;P+=1)v[P]&&v[P].classList.add(...`${a.bulletActiveClass}-main`.split(" "));g(_,"prev"),g(C,"next")}}if(a.dynamicBullets){const y=Math.min(v.length,a.dynamicMainBullets+4),_=(u*y-u)/2-S*u,C=t?"right":"left";v.forEach(P=>{P.style[e.isHorizontal()?C:"top"]=`${_}px`})}}i.forEach((v,L)=>{if(a.type==="fraction"&&(v.querySelectorAll(k(a.currentClass)).forEach(w=>{w.textContent=a.formatFractionCurrent(p+1)}),v.querySelectorAll(k(a.totalClass)).forEach(w=>{w.textContent=a.formatFractionTotal(D)})),a.type==="progressbar"){let w;a.progressbarOpposite?w=e.isHorizontal()?"vertical":"horizontal":w=e.isHorizontal()?"horizontal":"vertical";const S=(p+1)/D;let y=1,_=1;w==="horizontal"?y=S:_=S,v.querySelectorAll(k(a.progressbarFillClass)).forEach(C=>{C.style.transform=`translate3d(0,0,0) scaleX(${y}) scaleY(${_})`,C.style.transitionDuration=`${e.params.speed}ms`})}a.type==="custom"&&a.renderCustom?(F(v,a.renderCustom(e,p+1,D)),L===0&&d("paginationRender",v)):(L===0&&d("paginationRender",v),d("paginationUpdate",v)),e.params.watchOverflow&&e.enabled&&v.classList[e.isLocked?"add":"remove"](a.lockClass)})}function b(){const t=e.params.pagination;if(h())return;const a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let i=e.pagination.el;i=E(i);let p="";if(t.type==="bullets"){let x=e.params.loop?Math.ceil(a/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&x>a&&(x=a);for(let T=0;T<x;T+=1)t.renderBullet?p+=t.renderBullet.call(e,T,t.bulletClass):p+=`<${t.bulletElement} ${e.isElement?'part="bullet"':""} class="${t.bulletClass}"></${t.bulletElement}>`}t.type==="fraction"&&(t.renderFraction?p=t.renderFraction.call(e,t.currentClass,t.totalClass):p=`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`),t.type==="progressbar"&&(t.renderProgressbar?p=t.renderProgressbar.call(e,t.progressbarFillClass):p=`<span class="${t.progressbarFillClass}"></span>`),e.pagination.bullets=[],i.forEach(x=>{t.type!=="custom"&&F(x,p||""),t.type==="bullets"&&e.pagination.bullets.push(...x.querySelectorAll(k(t.bulletClass)))}),t.type!=="custom"&&d("paginationRender",i[0])}function M(){e.params.pagination=me(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const t=e.params.pagination;if(!t.el)return;let a;typeof t.el=="string"&&e.isElement&&(a=e.el.querySelector(t.el)),!a&&typeof t.el=="string"&&(a=[...document.querySelectorAll(t.el)]),a||(a=t.el),!(!a||a.length===0)&&(e.params.uniqueNavElements&&typeof t.el=="string"&&Array.isArray(a)&&a.length>1&&(a=[...e.el.querySelectorAll(t.el)],a.length>1&&(a=a.find(i=>Z(i,".swiper")[0]===e.el))),Array.isArray(a)&&a.length===1&&(a=a[0]),Object.assign(e.pagination,{el:a}),a=E(a),a.forEach(i=>{t.type==="bullets"&&t.clickable&&i.classList.add(...(t.clickableClass||"").split(" ")),i.classList.add(t.modifierClass+t.type),i.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass),t.type==="bullets"&&t.dynamicBullets&&(i.classList.add(`${t.modifierClass}${t.type}-dynamic`),m=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),t.type==="progressbar"&&t.progressbarOpposite&&i.classList.add(t.progressbarOppositeClass),t.clickable&&i.addEventListener("click",c),e.enabled||i.classList.add(t.lockClass)}))}function A(){const t=e.params.pagination;if(h())return;let a=e.pagination.el;a&&(a=E(a),a.forEach(i=>{i.classList.remove(t.hiddenClass),i.classList.remove(t.modifierClass+t.type),i.classList.remove(e.isHorizontal()?t.horizontalClass:t.verticalClass),t.clickable&&(i.classList.remove(...(t.clickableClass||"").split(" ")),i.removeEventListener("click",c))})),e.pagination.bullets&&e.pagination.bullets.forEach(i=>i.classList.remove(...t.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const t=e.params.pagination;let{el:a}=e.pagination;a=E(a),a.forEach(i=>{i.classList.remove(t.horizontalClass,t.verticalClass),i.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?O():(M(),b(),l())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&l()}),n("snapIndexChange",()=>{l()}),n("snapGridLengthChange",()=>{b(),l()}),n("destroy",()=>{A()}),n("enable disable",()=>{let{el:t}=e.pagination;t&&(t=E(t),t.forEach(a=>a.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{l()}),n("click",(t,a)=>{const i=a.target,p=E(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&p&&p.length>0&&!i.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&i===e.navigation.nextEl||e.navigation.prevEl&&i===e.navigation.prevEl))return;const x=p[0].classList.contains(e.params.pagination.hiddenClass);d(x===!0?"paginationShow":"paginationHide"),p.forEach(T=>T.classList.toggle(e.params.pagination.hiddenClass))}});const Y=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=E(t),t.forEach(a=>a.classList.remove(e.params.pagination.paginationDisabledClass))),M(),b(),l()},O=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=E(t),t.forEach(a=>a.classList.add(e.params.pagination.paginationDisabledClass))),A()};Object.assign(e.pagination,{enable:Y,disable:O,render:b,update:l,init:M,destroy:A})}function he(o){const{effect:e,swiper:s,on:n,setTranslate:d,setTransition:r,overwriteParams:u,perspective:m,recreateShadows:h,getEffectParams:g}=o;n("beforeInit",()=>{if(s.params.effect!==e)return;s.classNames.push(`${s.params.containerModifierClass}${e}`),m&&m()&&s.classNames.push(`${s.params.containerModifierClass}3d`);const c=u?u():{};Object.assign(s.params,c),Object.assign(s.originalParams,c)}),n("setTranslate _virtualUpdated",()=>{s.params.effect===e&&d()}),n("setTransition",(c,l)=>{s.params.effect===e&&r(l)}),n("transitionEnd",()=>{if(s.params.effect===e&&h){if(!g||!g().slideShadows)return;s.slides.forEach(c=>{c.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(l=>l.remove())}),h()}});let $;n("virtualUpdate",()=>{s.params.effect===e&&(s.slides.length||($=!0),requestAnimationFrame(()=>{$&&s.slides&&s.slides.length&&(d(),$=!1)}))})}function ve(o,e){const s=X(e);return s!==e&&(s.style.backfaceVisibility="hidden",s.style["-webkit-backface-visibility"]="hidden"),s}function ye(o){let{swiper:e,duration:s,transformElements:n}=o;const{activeIndex:d}=e;if(e.params.virtualTranslate&&s!==0){let r=!1,u;u=n,u.forEach(m=>{te(m,()=>{if(r||!e||e.destroyed)return;r=!0,e.animating=!1;const h=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(h)})})}}function _e(o){let{swiper:e,extendParams:s,on:n}=o;s({fadeEffect:{crossFade:!1}}),he({effect:"fade",swiper:e,on:n,setTranslate:()=>{const{slides:u}=e,m=e.params.fadeEffect;for(let h=0;h<u.length;h+=1){const g=e.slides[h];let c=-g.swiperSlideOffset;e.params.virtualTranslate||(c-=e.translate);let l=0;e.isHorizontal()||(l=c,c=0);const b=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(g.progress),0):1+Math.min(Math.max(g.progress,-1),0),M=ve(m,g);M.style.opacity=b,M.style.transform=`translate3d(${c}px, ${l}px, 0px)`}},setTransition:u=>{const m=e.slides.map(h=>X(h));m.forEach(h=>{h.style.transitionDuration=`${u}ms`}),ye({swiper:e,duration:u,transformElements:m})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}const Ce="_swiper_p5q6f_15",be="_swiper__wrapper_p5q6f_24",q={swiper:Ce,swiper__wrapper:be},xe=({children:o})=>{const e=B.useRef(null),s=B.useRef(null),n=r=>{if(!e.current||!s.current)return;const m=e.current.getBoundingClientRect(),h=r.clientX-m.left,g=m.width,$=h/g,c=B.Children.toArray(o).length;if(c===0)return;const l=Math.min(Math.floor($*c),c-1);s.current.swiper.slideTo(l)},d=()=>{s.current&&s.current.swiper.slideTo(0)};return f.jsx("div",{ref:e,onMouseLeave:d,onMouseMove:n,children:f.jsx(ae,{ref:s,slidesPerView:1,modules:[_e,ge],effect:"fade",wrapperClass:q.swiper__wrapper,className:q.swiper,pagination:{},children:o})})},we=o=>{const{id:e,userId:s,title:n,price:d,images:r}=o,u=W(),m=()=>{u(`/product/${e}`)},h=g=>{console.log(`В корзину добавлен товар: ${e} от пользователя: ${s}`),g.stopPropagation()};return f.jsxs("article",{className:j.card,onClick:m,children:[f.jsx(xe,{children:r.map(g=>f.jsx(se,{children:f.jsx("div",{className:j.card__image,children:f.jsx("img",{src:g,alt:""})})},g))}),f.jsxs("div",{className:j.card__content,children:[f.jsxs(ie,{variant:"30",className:j.card__price,children:[d," ₽"]}),n?f.jsx(I,{variant:"18",className:j.card__title,children:n}):f.jsx(I,{variant:"18",className:j.card__title,children:"Не определено описание!!!"}),f.jsxs(I,{variant:"13",className:j.card__title,children:["Продает пользователь ",s," по цене ",d]}),f.jsx(ue,{text:"Добавить в корзину",onClick:h,className:j.card__button})]})]})},G="/dterra-react/assets/product-image-CTaINGIJ.jpg",V="/dterra-react/assets/product-image2-WsigGrYA.jpg",$e=()=>{const[o,e]=B.useState([]),[s,n]=B.useState(""),d=async()=>{try{const g=(await ne.get("/albums")).data.map(c=>({...c,price:c.id*1e3,images:[G,V]})).filter((c,l)=>l%2===0).map((c,l)=>l%3===0?{...c,title:void 0}:c),$=g.reduce((c,l,b)=>c+(b!==0?", ":"")+l.id,"Все id товаров: ");n($),e(g)}catch(u){console.error(u)}},r=async()=>{try{const $=(await(await fetch("https://jsonplaceholder.typicode.com/albums",{method:"GET",headers:{"Content-Type":"application/json"}})).json()).map(l=>({...l,price:l.id*1e3,images:[G,V]})).filter((l,b)=>b%2===0).map((l,b)=>b%3===0?{...l,title:void 0}:l),c=$.reduce((l,b,M)=>l+(M!==0?", ":"")+b.id,"Все id товаров: ");n(c),e($)}catch(u){console.error(u)}};return B.useEffect(()=>{r()},[]),{products:o,productsIds:s,getProducts:d,getProductsFetch:r}},Le="_list_m6dev_15",Ee="_list__category_m6dev_35",Me="_list__category_active_m6dev_63",z={list:Le,list__category:Ee,list__category_active:Me},je=({categories:o,activeCategory:e})=>f.jsx("ul",{className:z.list,children:o.map(s=>f.jsx("li",{className:U(z.list__category,e===s.name&&z.list__category_active),children:f.jsx(J,{to:`/products/${s.name}`,children:f.jsx(I,{variant:"16",children:s.title})})},s.id))}),Ie=()=>{const{products:o,productsIds:e}=$e(),s=[{id:1,name:"astro",title:"Category 1 title"},{id:2,name:"picture",title:"Category 2 title"},{id:3,name:"auto",title:"Category 3 title"},{id:4,name:"games",title:"Category 4 title"},{id:5,name:"category5",title:"Category 5 title"},{id:6,name:"category6",title:"Category 6 title"}];return f.jsxs(f.Fragment,{children:[f.jsx(I,{className:R.container,children:e}),f.jsx("div",{style:{marginBottom:"20px"},children:f.jsx(je,{categories:s,activeCategory:"astro"})}),f.jsx("div",{className:R.list,children:o.map(n=>f.jsx(we,{id:n.id,userId:n.userId,title:n.title,price:n.price,images:n.images},n.id))})]})};export{Ie as P};
